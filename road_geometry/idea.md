# 如何实现这个功能？

## 目前对方框的标注原理

标注图片的核心逻辑是在./GUI/canvas.py中完成的。
首先这个canvas类继承了Qwidget，是一个pyqt的组件。Qwiget和window的区别是：<https://blog.csdn.net/u011699626/article/details/116332144>

当前标记的流程：

1. 选择标注功能
2. 选择标注种类
3. 鼠标移动到图片上之后会变成十字，然后点击之后开始画框，释放左键之后变回正常。
4. 对框双击可以修改框的属性、可以拖拽框的位置、拖拽角点可以修改框的大小和形状。

canvas的初始化流程：

- 读取视频，并保存为frame数组imgFrames;
- 创建文件读取器和目标跟踪器fileWorker和trackWorker
- 初始化整个的paint画图流程
  - 用当前帧创建一个可以paint的pixmap，用来显示在整个canvas里；
  - 创建一个绘图用的painter;
  - 每一个方框都是一个shape;
  - 开始监听鼠标的移动事件和焦点事件;
  -

## 需要进行的改进

当前标记流程的变化：

1. 添加一种标注功能按钮
2. 研究如何标注出连续直线
3. 左键开始标注，右键停止
4. 对关键点可以拖拽，对直线进行删除
5. 双击线可以修改直线的属性

对1，需要修改gui，添加一个按钮和一个下拉列表
1.5需要做的是研究明白这里面的signal和event之间的关系。
对2，需要研究qt里是否有这个shape，如果有的话可以直接大量复用代码
